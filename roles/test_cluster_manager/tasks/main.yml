---
# Main entry point for test_cluster_manager role
# Routes to setup or teardown based on cluster_action variable

- name: Validate cluster_action parameter
  ansible.builtin.assert:
    that:
      - cluster_action is defined
      - cluster_action in ['setup', 'teardown']
    fail_msg: "cluster_action must be either 'setup' or 'teardown'"
    quiet: true

- name: Include setup tasks
  ansible.builtin.include_tasks: setup.yml
  when: cluster_action == 'setup'

- name: Include teardown tasks
  ansible.builtin.include_tasks: teardown.yml
  when: cluster_action == 'teardown'
